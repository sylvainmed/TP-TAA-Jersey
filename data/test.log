/*C3*/SET SCHEMA PUBLIC
drop table Event if exists
drop table Passager if exists
drop table Passager_Event if exists
drop table Voiture if exists
create table Event (id integer generated by default as identity (start with 1), date varchar(255), heure varchar(255), place varchar(255), primary key (id))
create table Passager (id integer generated by default as identity (start with 1), nom varchar(255), voiture_id integer, primary key (id))
create table Passager_Event (Passager_id integer not null, events_id integer not null, unique (events_id))
create table Voiture (id integer generated by default as identity (start with 1), places integer not null, event_id integer, primary key (id))
alter table Passager add constraint FK4C59FF042D48F407 foreign key (voiture_id) references Voiture
alter table Passager_Event add constraint FKB457917F3685C8A8 foreign key (events_id) references Event
alter table Passager_Event add constraint FKB457917F8DA1B80D foreign key (Passager_id) references Passager
alter table Voiture add constraint FK88BFF924452C3B87 foreign key (event_id) references Event
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
alter table Passager drop constraint FK4C59FF042D48F407
alter table Passager_Event drop constraint FKB457917F3685C8A8
alter table Passager_Event drop constraint FKB457917F8DA1B80D
alter table Voiture drop constraint FK88BFF924452C3B87
drop table Event if exists
drop table Passager if exists
drop table Passager_Event if exists
drop table Voiture if exists
create table Event (id integer generated by default as identity (start with 1), date varchar(255), heure varchar(255), place varchar(255), primary key (id))
create table Passager (id integer generated by default as identity (start with 1), nom varchar(255), voiture_id integer, primary key (id))
create table Passager_Event (Passager_id integer not null, events_id integer not null, unique (events_id))
create table Voiture (id integer generated by default as identity (start with 1), places integer not null, event_id integer, primary key (id))
alter table Passager add constraint FK4C59FF042D48F407 foreign key (voiture_id) references Voiture
alter table Passager_Event add constraint FKB457917F3685C8A8 foreign key (events_id) references Event
alter table Passager_Event add constraint FKB457917F8DA1B80D foreign key (Passager_id) references Passager
alter table Voiture add constraint FK88BFF924452C3B87 foreign key (event_id) references Event
INSERT INTO VOITURE VALUES(1,3,NULL)
INSERT INTO EVENT VALUES(1,NULL,NULL,NULL)
DELETE FROM VOITURE WHERE ID=1
INSERT INTO VOITURE VALUES(1,3,1)
COMMIT
DISCONNECT
