/*C3*/SET SCHEMA PUBLIC
drop table Event if exists
drop table Passager if exists
drop table Voiture if exists
create table Event (id integer generated by default as identity (start with 1), date varchar(255), heure varchar(255), place varchar(255), primary key (id))
create table Passager (id integer generated by default as identity (start with 1), nom varchar(255), event_id integer, voiture_id integer, primary key (id))
create table Voiture (id integer generated by default as identity (start with 1), places integer not null, event_id integer, primary key (id))
alter table Passager add constraint FK4C59FF0490DF3C91 foreign key (event_id) references Event
alter table Passager add constraint FK4C59FF04583FDA91 foreign key (voiture_id) references Voiture
alter table Voiture add constraint FK88BFF92490DF3C91 foreign key (event_id) references Event
INSERT INTO VOITURE VALUES(1,3,NULL)
COMMIT
INSERT INTO VOITURE VALUES(2,2,NULL)
COMMIT
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
alter table Passager drop constraint FK4C59FF0490DF3C91
alter table Passager drop constraint FK4C59FF04583FDA91
alter table Voiture drop constraint FK88BFF92490DF3C91
drop table Event if exists
drop table Passager if exists
drop table Voiture if exists
create table Event (id integer generated by default as identity (start with 1), date varchar(255), heure varchar(255), place varchar(255), primary key (id))
create table Passager (id integer generated by default as identity (start with 1), nom varchar(255), event_id integer, voiture_id integer, primary key (id))
create table Voiture (id integer generated by default as identity (start with 1), places integer not null, event_id integer, primary key (id))
alter table Passager add constraint FK4C59FF0490DF3C91 foreign key (event_id) references Event
alter table Passager add constraint FK4C59FF04583FDA91 foreign key (voiture_id) references Voiture
alter table Voiture add constraint FK88BFF92490DF3C91 foreign key (event_id) references Event
INSERT INTO VOITURE VALUES(1,3,NULL)
COMMIT
INSERT INTO VOITURE VALUES(2,2,NULL)
COMMIT
INSERT INTO EVENT VALUES(1,'23/02/1998','12:25','5')
COMMIT
DISCONNECT
